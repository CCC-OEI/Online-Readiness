<!DOCTYPE html>
<html>
	<head>
		
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="description" content="Calculate the costs and savings of online learning.">
		<meta name="keywords" content="time, time management, time balancing, timing, schedules, schedule">
		<title>Study Schedule</title>
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'>


		<link href="css/styles.css" rel="stylesheet" />
        <script>

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){

      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),

      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)

      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-65911246-1', 'auto');

      ga('send', 'pageview');

    </script>

		<script src="script/jquery-1.11.3.min.js"></script>
		<script src="script/colorpicker.js"></script>

		<style type="text/css">
			body.printing { background: #FFF; }
			.hide, #print-back, #errors, #footer.printing, .push.printing, .button-block.printing { display: none; }
			#print-back { float: right; margin-top: 5px; }
			#addrow { margin-right: 5px; }
			.disabled-text { background: #F5F5F5; }
			.disabled-text td input { color: #CCC; }
			.simplecolorpicker { border: 1px solid #999 !important; }
			#results { margin-top: 20px; }
			#results tr th { width: 100px; min-width: 100px; max-width: 100px; white-space: nowrap; font-size: 13px; }
			#results tr td { width: 100px; min-width: 100px; max-width: 100px; white-space: nowrap; text-align: center; }
			#results td.empty, 
			#results th.empty { text-align: right; padding-right: 20px; width: 70px; min-width: 70px; max-width: 70px; font-size: 10px; }
			#results-container { overflow-x: auto; }
			.bg2 { background: #F5F5F5; }
			.bg1 { background: #FFF; }
			.stripeColor { color: #999; }
			#errors { padding: 10px 20px; margin: 20px 0; background: #ffdddd; border: 1px solid #ffa0a0; color: #7c1f1f; }
			.cell { height: 30px; min-height: 30px; max-height: 30px; }
			#results-container { position: relative; }
			.event-item { position: absolute; text-align: center; opacity: 0.6; padding-top: 5px; }
			.control-container { margin: 15px 0;}
			#questions tr th { white-space: nowrap;  }
			#questions-container { overflow-x: auto; }
		</style>

		<script>
			$(function() {
				var table = $('#results tbody');
				var colors = { "Green": "#7cdb74", "Bold blue": "#aae2ff", "Blue": "#a4bdfc", "Turquoise": "#86ecef", "Light Green": "#d0f9cc", "Bold Green": "#70ff63", "Yellow": "#fbd75b", "Orange": "#ffddbf", "Red": "#ffdddd", "Bold Red": "#f9a4a4", "Purple": "#dbadff", "Gray": "#e1e1e1" };
				var time = ["7:00 AM", "7:30 AM", "8:00 AM", "8:30 AM", "9:00 AM", "9:30 AM", "10:00 AM", "10:30 AM", "11:00 AM", "11:30 AM", "12:00 PM", "12:30 PM", "1:00 PM", "1:30 PM", "2:00 PM", "2:30 PM", "3:00 PM", "3:30 PM", "4:00 PM", "4:30 PM", "5:00 PM", "5:30 PM", "6:00 PM", "6:30 PM", "7:00 PM", "7:30 PM", "8:00 PM", "8:30 PM", "9:00 PM", "9:30 PM", "10:00 PM"];
				var rowCount = 0;
				var data;

				function showError(msg) {
					var elem = $('#errors');
					elem.html(msg);
					elem.show();
				}

				function ColorLuminance(hex, lum) {
			    hex = String(hex).replace(/[^0-9a-f]/gi, '');
			    if (hex.length < 6) {
			        hex = hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];
			    }
			    lum = lum || 0;
			    var rgb = "#", c, i;
			    for (i = 0; i < 3; i++) {
			        c = parseInt(hex.substr(i*2,2), 16);
			        c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);
			        rgb += ("00"+c).substr(c.length);
			    }
			    return rgb;
				}

				function validate(id) {
					var dayCheck = $('input[name="row-' + id + '-day[]"]:checked').length > 0 ? true : false;
					var timeCheck = false;
					var nameCheck = $('#row-' + id + '-course').val() ? true : false;
					var startTime = parseInt($('#row-' + id + '-start').val());
					var endTime = parseInt($('#row-' + id + '-end').val());

					$('#errors').hide();

					if (startTime < endTime) {
						timeCheck = true;
					} else {
						if (startTime >= 0 && endTime >= 0) {
							showError('Class start time must be before the end time');
						}
					}

					if (dayCheck && timeCheck && nameCheck) {
						return true;
					}
					return false;
				}

				function createColorPicker(id, example) {
					var colorPick = '<select id="' + id + '"' + (example ? ' disabled' : '') + '>';
					
					for(name in colors) {
						colorPick += '<option value="' + colors[name] + '"' + (name === "Blue" ? ' selected' : '') + '>' + name + '</option>';
					}

					return colorPick + '</select>';
				}

				function createTimeDropdown(id, example, startOrEnd) {
					var select = '<select id="' + id + '"' + (example ? ' disabled' : '') + '><option value=""></option>';

					for (ind in time) {
						var ex = '';
						if (example && (startOrEnd === "start" && ind === 9) || (startOrEnd === "end" && ind === 12)) {
							ex = ' selected'
						}
						select += '<option value="' + ind + '">' + time[ind] + '</option>';
					}

					return select + '</select>';
				}
					  
				function createRow(example) {
					$('#questions').append('<tr' + (example ? ' class="disabled-text"' : '') + '><td><input type="text" id="row-' + rowCount + '-course"' + (example ? ' value="SCI 101" disabled' : '') + ' /></td><td class="ctr"><input type="checkbox" value="1" name="row-' + rowCount + '-day[]" id="row-' + rowCount + '-mon"' + (example ? ' disabled' : '') + ' /><label for="row-' + rowCount + '-mon" class="hide">Row ' + rowCount + ' checkbox for Monday</label></td><td class="ctr"><input type="checkbox" name="row-' + rowCount + '-day[]" value="2" id="row-' + rowCount + '-tue"' + (example ? ' disabled checked' : '') + ' /><label for="row-' + rowCount + '-tue" class="hide">Row ' + rowCount + ' checkbox for Tuesday</label></td><td class="ctr"><input type="checkbox" name="row-' + rowCount + '-day[]" value="3" id="row-' + rowCount + '-wed"' + (example ? ' disabled' : '') + ' /><label for="row-' + rowCount + '-wed" class="hide">Row ' + rowCount + ' checkbox for Wednesday</label></td><td class="ctr"><input type="checkbox" name="row-' + rowCount + '-day[]" value="4" id="row-' + rowCount + '-thu"' + (example ? ' disabled checked' : '') + ' /><label for="row-' + rowCount + '-thu" class="hide">Row ' + rowCount + ' checkbox for Thursday</label></td><td class="ctr"><input type="checkbox" name="row-' + rowCount + '-day[]" value="5" id="row-' + rowCount + '-fri"' + (example ? ' disabled' : '') + ' /><label for="row-' + rowCount + '-fri" class="hide">Row ' + rowCount + ' checkbox for Friday</label></td><td>' + createTimeDropdown('row-' + rowCount + '-start', example, "start") + '</td><td>' + createTimeDropdown('row-' + rowCount + '-end', example, "end") + '</td><td class="ctr">' + createColorPicker('row-' + rowCount + '-color', example) + '</td></tr>');
					$('#row-' + rowCount + '-color').simplecolorpicker({ picker: true });
					rowCount++;
				}

				function drawSchedule() {
					var html;

					for (var timeIndex = 0; timeIndex < time.length; timeIndex+=2) {
						html += '<tr><th class="empty">' + time[timeIndex] + '</th>';
						for (var dayIndex = 1; dayIndex < 6; dayIndex++) {
							html += '<td class="cell"></td>';
						}
						html += '</tr>';
					}

					table.html(html);
				}

				function setData() {
					data = [];
					for (var i = 1; i <= rowCount; i++) {
						if (validate(i)) {
							var daysArray = [];
							var startTime = parseInt($('#row-' + i + '-start').val());
							var endTime = parseInt($('#row-' + i + '-end').val());

							$('input[name="row-' + i + '-day[]"]:checked').each(function() {
								daysArray.push(parseInt($(this).val()));
							});

							data.push({
								index: i,
								course: $('#row-' + i + '-course').val(),
								days: daysArray,
								start: startTime,
								end: endTime,
								color: $('#row-' + i + '-color').val()
							});
						}
					}

					drawEvents();
				}

				function drawEvents() {
					var elem = $('#results-container');
					var firstElem = $('#results th:first-child');
					var html = "";
					var unitHeight = ($('.cell').outerHeight()) / 2;
					var unitWidth = $('.cell').outerWidth();
					var startPadWidth = firstElem.outerWidth() + 1;
					var startPadHeight = firstElem.outerHeight() + 20;
					var pad = 3;
					var width = unitWidth - 7;

					$('.event-item').remove();

					$.each(data, function(num, evt) {
						var timeDiff = evt.end - evt.start;
						var height = (unitHeight * timeDiff) - 12;
						var top = startPadHeight + (evt.start * unitHeight) + 1;
						
						$.each(evt.days, function(dayIndex, day) {
							var left = startPadWidth + ((day - 1) * unitWidth);
							
							html += '<div class="event-item" style="top: ' + top + 'px; left: ' + left + 'px; height: ' + height + 'px; width: ' + width + 'px; background: ' + evt.color + '; z-index: ' + num + '; border: 3px solid ' + ColorLuminance(evt.color, -0.2) + ';">' + evt.course + '</div>';
							console.log(html);
						}); 
						
					});

					elem.prepend(html);
				}

				function handleInput() {
					var idStr = $(this).attr('id').split('-');
					var id = idStr[1];
					var valid = validate(id);

					if (valid) {
						setData();
						drawSchedule();
					}
				}

				function toggleInfo(state) {
					if (state) {
						$('.print-hide').show();
						$('.print-show').hide();
						$('body, #footer, .push, .button-block').removeClass('printing');
					} else {
						$('body, #footer, .push, .button-block').addClass('printing');
						$('.print-hide').hide();
						$('.print-show').show();
					}
				}

				createRow(true); // example row
				for (var startingRows = 1; startingRows < 4; startingRows++) {
					createRow();
				}

				$('#questions').delegate('input:checkbox', 'change', handleInput);
				$('#questions').delegate('select', 'change', handleInput);
				$('#questions').delegate('input:text', 'keyup', handleInput);

				drawSchedule();

				$('#print').click(function() {
					toggleInfo(false);
					window.print();
				});

				$('#print-back').click(function() {
					toggleInfo(true);
				});

				$('#addrow').click(function() {
					createRow();
				});
			});

		</script>

	</head>
	<body>
		<div class="wrapper">
      <div class="container">
       
        <div class="banner print-hide">
          <div class="logo">
            <img src="img/OEIHeader-Silver-2B.jpg" alt="California Community Colleges Logo" />
          </div>
        </div>

        <div class="content">
					<button class="print-show" id="print-back" role="button" type="button">Go Back</button>
					<h2>Study Schedule</h2>
					<hr />
					
					<div class="print-hide">
						<p><b>Use this tool to create a printable class/study schedule to help you plan your time during the week.</b></p>
						<p>Add your courses and study times to the first column, select the appropriate days of the week, enter start and end times and select a color to color-code items in your chart.</p>
						<p>As you fill out each row your schedule will populate. Add additional rows as you need them.   The first row is used as an example and will not be added to your schedule.</p>
						<p>Once you have entered all of your information click "Print Schedule" to produce a hard copy for reference.</p>
					</div>

					<div class="print-hide">
						<div id="errors"></div>
						
						<div id="questions-container">
							<table id="questions" class="simple">
								<thead>
									<tr>
										<th role="col">Course</th>
										<th class="ctr" role="col">Mon</th>
										<th class="ctr" role="col">Tue</th>
										<th class="ctr" role="col">Wed</th>
										<th class="ctr" role="col">Thu</th>
										<th class="ctr" role="col">Fri</th>
										<th role="col">Start Time</th>
										<th role="col">End Time</th>
										<th class="ctr" role="col">Color</th>
									<tr>
								</thead>
								<tbody></tbody>
							</table>
						</div>

						<div class="control-container">
							<button id="addrow" role="button" type="button">Add Row</button>
							<button id="print" role="button" type="button">Print Schedule</button>
						</div>

						<hr />
					</div>

					<div id="results-container">
						<table id="results">
							<thead>
								<tr>
									<th class="empty"></th>
									<th class="ctr" role="col">Monday</th>
									<th class="ctr" role="col">Tuesday</th>
									<th class="ctr" role="col">Wednesday</th>
									<th class="ctr" role="col">Thursday</th>
									<th class="ctr" role="col">Friday</th>
								<tr>
							</thead>
							<tbody></tbody>
						</table>
					</div>

					<div class="disclaimers print-hide">
						<hr />
						<img src="img/ccby-4.0.png" alt="Creative Commons License Logo" />
                       
                        <div><p><b>Creative Commons License Info:</b><br /><br />
						© 2015 Chancellor's Office, California Community Colleges<br />
						<a rel="license" href="https://creativecommons.org/licenses/by/4.0/"></a>This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" target="_new" rel="license">Creative Commons Attribution 4.0 International License</a>.</p></div>
	      	</div>

					<div class="bottom-block"></div>
					<div class="push"></div>
	      </div>
	    </div>
	  </div>

	  <div id="footer"></div>

	</body>
</html>